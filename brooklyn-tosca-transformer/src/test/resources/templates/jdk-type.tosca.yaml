tosca_definitions_version: tosca_simple_yaml_1_0_0_wd03
description: TOSCA simple profile with JDK.
template_name: jdk-type
template_version: 1.0.0-SNAPSHOT
template_author: FastConnect

imports:
- tosca-normative-types:1.0.0.wd06-SNAPSHOT
- brooklyn-types:0.1.0-SNAPSHOT
- jdk-type:1.0.0-SNAPSHOT

topology_template:
  node_templates:
    JDK:
      type: tosca.nodes.SoftwareComponent
#      type: alien.nodes.JDK
#      properties:
#        java_url: "http://download.oracle.com/otn-pub/java/jdk/7u75-b13/jdk-7u75-linux-x64.tar.gz"
#        java_home: /opt/java
      requirements:
        - host:
            node: Compute
            capability: tosca.capabilities.Container
            relationship: tosca.relationships.HostedOn
    Compute:
      type: brooklyn.nodes.Compute
      capabilities:
        endpoint:
          properties:
            protocol: tcp
            initiator: source
            network_name: PRIVATE
            secure: true
        scalable:
          properties:
            min_instances: 1
            max_instances: 1
            default_instances: 1

  # if you want to tell brooklyn to assign a location at deploy time, as part of the template, this is the current way.
  # it can also be done with camp, referencing this topology template.
  groups:
    add_brooklyn_location:
      members: [ compute ]
      policies:
      - brooklyn.location: localhost